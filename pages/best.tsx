import Head from 'next/head'
import FirstHeader from '@/components/layouts/FirstHeader'
import ProductList from '@/components/layouts/ProductList'
import axios from 'axios'
import { useState, useEffect } from 'react'
import { productList } from '@/types/type'
import { useRouter } from 'next/router'


export default function Best() {
  const [data, setData] = useState<productList[]>([])

  const BaseUrl = process.env.baseApiUrl;
  console.log(BaseUrl)

  const router = useRouter();
  console.log(router.query.category)
  useEffect(() => {
    axios.get(`${BaseUrl}/api/v1/product/get-best/${router.query.category}`)
    .then( res => {
      console.log('res',res.data)
      setData(res.data)
    })
    .catch( err  => console.log( err ))
  },[router.query.category])
  return (
    <>
      <Head>
        <title>EVENT</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favic
        rfon.ico" />
      </Head>
      <FirstHeader />
      <ProductList
        itemData={data} 
      />
      
    </>
  )
}
